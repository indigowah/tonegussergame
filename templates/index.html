<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tone Gusser</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="page">
        <header class="header">
            <h1>Tone Gusser</h1>
            <p class="tagline">Train your ear with random Mandarin tones.</p>
        </header>

        <section class="controls card">
            <h2>Settings</h2>
            <div class="control-group">
                <span class="label">Difficulties</span>
                <div class="checkboxes">
                    {% for difficulty in difficulties %}
                    <label class="checkbox">
                        <input type="checkbox" value="{{ difficulty }}" class="difficulty-option">
                        <span>{{ difficulty }}</span>
                    </label>
                    {% endfor %}
                </div>
            </div>
            <div class="control-group">
                <label for="option-count" class="label">Number of options</label>
                <input id="option-count" type="number" min="2" max="8" value="4">
            </div>
            <div class="buttons">
                <button id="start-btn">Start</button>
                <button id="replay-btn" disabled>Replay</button>
                <button id="end-btn" disabled>End</button>
            </div>
        </section>

        <section class="game card">
            <h2>Guess the tone</h2>
            <div id="status-message" class="status">Choose settings and press start.</div>
            <div id="options-container" class="options"></div>
        </section>

        <section class="stats card">
            <div class="stat-header">
                <h2>Progress</h2>
                <button id="reset-btn" class="ghost-button">Reset progress</button>
            </div>
            <div class="stat-grid">
                <div class="stat">
                    <span class="stat-label">Rounds completed</span>
                    <span class="stat-value" id="stat-rounds">0</span>
                </div>
                <div class="stat">
                    <span class="stat-label">Total guesses</span>
                    <span class="stat-value" id="stat-guesses">0</span>
                </div>
                <div class="stat">
                    <span class="stat-label">Accuracy</span>
                    <span class="stat-value" id="stat-accuracy">0%</span>
                </div>
                <div class="stat">
                    <span class="stat-label">First try hits</span>
                    <span class="stat-value" id="stat-first-try">0</span>
                </div>
                <div class="stat">
                    <span class="stat-label">Avg attempts / round</span>
                    <span class="stat-value" id="stat-average">0</span>
                </div>
            </div>
            <div class="graphs">
                <img id="graph-accuracy" alt="Accuracy by difficulty graph">
                <img id="graph-cumulative" alt="Cumulative accuracy graph">
            </div>
            <div class="tone-lists">
                <div class="tone-list">
                    <h3>Most problematic tones</h3>
                    <ul id="tone-worst" class="tone-items"></ul>
                </div>
                <div class="tone-list">
                    <h3>Best tones</h3>
                    <ul id="tone-best" class="tone-items"></ul>
                </div>
            </div>
        </section>
    </div>

    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>
